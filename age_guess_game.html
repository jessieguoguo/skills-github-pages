<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>çŒœçŒœæˆ‘å‡ å²ï¼Ÿ</title>
    <style>
        /* å…¨å±€æ ·å¼ */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Microsoft YaHei', 'å¾®è½¯é›…é»‘', Arial, sans-serif;
            background: linear-gradient(135deg, #FFF8DC 0%, #FFE4B5 50%, #FFDAB9 100%);
            color: #333;
            overflow: hidden;
        }

        /* æ¸¸æˆå®¹å™¨ */
        .game-container {
            display: flex;
            width: 100vw;
            height: 100vh;
            max-width: 1920px;
            max-height: 1080px;
            margin: 0 auto;
        }

        /* ä¾§è¾¹æ  */
        .sidebar {
            width: 250px;
            background: rgba(255, 255, 255, 0.95);
            border-right: 5px solid #FF6347;
            padding: 20px;
            display: flex;
            flex-direction: column;
            box-shadow: 5px 0 15px rgba(0, 0, 0, 0.2);
        }

        .sidebar h2 {
            color: #FF6347;
            text-align: center;
            margin-bottom: 20px;
            font-size: 24px;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.1);
        }

        .sidebar h3 {
            color: #4682B4;
            margin-bottom: 10px;
            font-size: 18px;
        }

        .level-status, .game-stats {
            background: rgba(255, 255, 255, 0.8);
            padding: 15px;
            border-radius: 15px;
            margin-bottom: 20px;
            border: 3px solid #4682B4;
            box-shadow: 3px 3px 10px rgba(0, 0, 0, 0.1);
        }

        .level-item, .stat-item {
            margin-bottom: 10px;
            font-size: 16px;
            font-weight: bold;
        }

        .level-item span, .stat-item span {
            color: #FF6347;
        }

        .sidebar-image {
            margin-top: auto;
            text-align: center;
            padding: 10px;
        }

        .sidebar-image img {
            max-width: 100%;
            height: auto;
            border-radius: 10px;
            border: 3px solid #4682B4;
        }

        /* ä¸»æ¸¸æˆåŒºåŸŸ */
        .main-game {
            flex: 1;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 20px;
        }

        .main-game h1 {
            color: #FFFFFF;
            font-size: 48px;
            margin-bottom: 20px;
            text-shadow: 3px 3px 6px rgba(0, 0, 0, 0.3);
        }

        /* æç¤ºä¿¡æ¯åŒºåŸŸ */
        .hint-message {
            background: rgba(255, 255, 255, 0.95);
            padding: 20px 40px;
            border-radius: 25px;
            margin-bottom: 20px;
            box-shadow: 5px 5px 15px rgba(0, 0, 0, 0.2);
            border: 4px solid #4682B4;
        }

        .hint-message p {
            font-size: 24px;
            font-weight: bold;
            color: #4682B4;
            text-align: center;
        }

        /* æ•°å­—æŒ‰é’®ç½‘æ ¼ */
        .number-grid {
            display: grid;
            grid-template-columns: repeat(20, 1fr);
            grid-template-rows: repeat(5, 1fr);
            gap: 8px;
            width: 90%;
            height: 60vh;
            max-height: 600px;
            background: rgba(255, 255, 255, 0.3);
            padding: 20px;
            border-radius: 20px;
            box-shadow: inset 0 0 20px rgba(0, 0, 0, 0.1);
        }

        /* æ•°å­—æŒ‰é’®æ ·å¼ */
        .number-btn {
            background: white;
            color: #1a3a5f;
            border: 3px solid #FFA500;
            border-radius: 12px;
            font-size: 18px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.15);
            text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.1);
        }

        .number-btn:hover {
            background: #fff3e0;
            transform: translateY(-2px);
            box-shadow: 0 6px 12px rgba(0, 0, 0, 0.2);
        }

        .number-btn:active {
            transform: translateY(0);
        }

        .number-btn.correct {
            background: #98FB98;
            border-color: #32CD32;
            color: #228B22;
            animation: pulse 1s infinite;
        }

        .number-btn.wrong {
            background: #c4c4c4;
            border-color: #bdbdbd;
            color: #000000;
        }

        /* ä¸‹ä¸€å…³æŒ‰é’® */
        .next-level {
            margin-top: 20px;
        }

        #next-level-btn {
            background: #4682B4;
            color: white;
            border: none;
            padding: 15px 40px;
            font-size: 24px;
            font-weight: bold;
            border-radius: 30px;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 5px 5px 15px rgba(0, 0, 0, 0.2);
        }

        #next-level-btn:hover {
            background: #1E90FF;
            transform: translateY(-3px);
            box-shadow: 7px 7px 20px rgba(0, 0, 0, 0.3);
        }

        /* çƒŸèŠ±ç‰¹æ•ˆå®¹å™¨ */
        #fireworks-container {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 1000;
        }

        /* çƒŸèŠ±ç²’å­ */
        .firework {
            position: absolute;
            width: 5px;
            height: 5px;
            border-radius: 50%;
            animation: explode 1s ease-out forwards;
        }

        /* åŠ¨ç”»æ•ˆæœ */
        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.15); }
        }

        @keyframes explode {
            0% {
                opacity: 1;
                transform: scale(1);
            }
            100% {
                opacity: 0;
                transform: scale(5) translateY(50px);
            }
        }

        /* å“åº”å¼è®¾è®¡ */
        @media (max-width: 1600px) {
            .number-btn {
                font-size: 16px;
            }
        }

        @media (max-width: 1400px) {
            .number-btn {
                font-size: 14px;
            }
            
            .sidebar {
                width: 200px;
            }
            
            .sidebar h2 {
                font-size: 20px;
            }
            
            .level-item, .stat-item {
                font-size: 14px;
            }
        }

        @media (max-width: 1200px) {
            .number-grid {
                grid-template-columns: repeat(15, 1fr);
                grid-template-rows: repeat(7, 1fr);
            }
        }

        /* 16:9æ¯”ä¾‹ä¼˜åŒ– */
        @media (aspect-ratio: 16/9) {
            .number-grid {
                height: 65vh;
            }
        }
    </style>
</head>
<body>
    <div class="game-container">
        <!-- ä¾§è¾¹æ  -->
        <div class="sidebar">
            <h2>æ¸¸æˆä¿¡æ¯</h2>
            <div class="level-status">
                <h3>å…³å¡è¿›åº¦</h3>
                <div class="level-item">ç¬¬1å…³: <span id="level1-status">æœªå®Œæˆ</span></div>
                <div class="level-item">ç¬¬2å…³: <span id="level2-status">æœªå¼€å§‹</span></div>
                <div class="level-item">ç¬¬3å…³: <span id="level3-status">æœªå¼€å§‹</span></div>
            </div>
            
            <div class="game-stats">
                <h3>å½“å‰å…³å¡</h3>
                <div class="stat-item">å…³å¡: <span id="current-level">1</span></div>
                <div class="stat-item">çŒœæµ‹æ¬¡æ•°: <span id="guess-count">0</span></div>
                <div class="stat-item">å½“å‰ç§¯åˆ†: <span id="current-score">0</span></div>
            </div>
            
            <div class="sidebar-image">
                <img src="https://cdn.jsdelivr.net/gh/jessieguoguo/my_image/someone.png" alt="æ¸¸æˆè§’è‰²">
            </div>
        </div>
        
        <!-- æ¸¸æˆä¸»åŒºåŸŸ -->
        <div class="main-game">
            <h1>çŒœçŒœæˆ‘å‡ å²ï¼Ÿ</h1>
            
            <div class="hint-message">
                <p id="hint-text">è¯·ç‚¹å‡»ä¸‹æ–¹æ•°å­—å¼€å§‹çŒœæµ‹ï¼</p>
            </div>
            
            <div class="number-grid">
                <!-- æ•°å­—æŒ‰é’®å°†é€šè¿‡JavaScriptåŠ¨æ€ç”Ÿæˆ -->
            </div>
            
            <div class="next-level" id="next-level" style="display: none;">
                <button id="next-level-btn">ä¸‹ä¸€å…³</button>
            </div>
        </div>
    </div>
    
    <!-- çƒŸèŠ±ç‰¹æ•ˆå®¹å™¨ -->
    <div id="fireworks-container"></div>
    
    <script>
        // æ¸¸æˆçŠ¶æ€ç®¡ç†
        let gameState = {
            currentLevel: 1,
            totalLevels: 3,
            correctNumber: null,
            guessCount: 0,
            totalScore: 0,
            excludedNumbers: [50, 75, 25, 12, 37, 63, 87],
            levelHistory: [],
            isPlaying: true
        };

        // DOMå…ƒç´ å¼•ç”¨
        const elements = {
            level1Status: document.getElementById('level1-status'),
            level2Status: document.getElementById('level2-status'),
            level3Status: document.getElementById('level3-status'),
            currentLevel: document.getElementById('current-level'),
            guessCount: document.getElementById('guess-count'),
            currentScore: document.getElementById('current-score'),
            hintText: document.getElementById('hint-text'),
            numberGrid: document.querySelector('.number-grid'),
            nextLevel: document.getElementById('next-level'),
            nextLevelBtn: document.getElementById('next-level-btn'),
            fireworksContainer: document.getElementById('fireworks-container')
        };

        // åˆå§‹åŒ–æ¸¸æˆ
        function initGame() {
            // è®¾ç½®å½“å‰å…³å¡çš„æ­£ç¡®æ•°å­—
            setCorrectNumber();
            
            // é‡ç½®å½“å‰å…³å¡çŠ¶æ€
            gameState.guessCount = 0;
            gameState.isPlaying = true;
            
            // æ›´æ–°UI
            updateUI();
            
            // ç”Ÿæˆæ•°å­—æŒ‰é’®
            generateNumberButtons();
            
            // éšè—ä¸‹ä¸€å…³æŒ‰é’®
            elements.nextLevel.style.display = 'none';
        }

        // è®¾ç½®å½“å‰å…³å¡çš„æ­£ç¡®æ•°å­—
        function setCorrectNumber() {
            if (gameState.currentLevel === 1) {
                gameState.correctNumber = 39;
            } else {
                let previousNumber = gameState.levelHistory.length > 0 ? 
                    gameState.levelHistory[gameState.levelHistory.length - 1].correctNumber : null;
                
                do {
                    gameState.correctNumber = Math.floor(Math.random() * 100) + 1;
                } while (
                    gameState.excludedNumbers.includes(gameState.correctNumber) || 
                    gameState.correctNumber === previousNumber
                );
            }
        }

        // æ›´æ–°UI
        function updateUI() {
            // æ›´æ–°å…³å¡çŠ¶æ€
            updateLevelStatus();
            
            // æ›´æ–°å½“å‰å…³å¡ä¿¡æ¯
            elements.currentLevel.textContent = gameState.currentLevel;
            elements.guessCount.textContent = gameState.guessCount;
            elements.currentScore.textContent = gameState.totalScore;
            
            // é‡ç½®æç¤ºä¿¡æ¯
            elements.hintText.textContent = 'è¯·ç‚¹å‡»ä¸‹æ–¹æ•°å­—å¼€å§‹çŒœæµ‹ï¼';
            elements.hintText.style.color = '#4682B4';
        }

        // æ›´æ–°å…³å¡çŠ¶æ€æ˜¾ç¤º
        function updateLevelStatus() {
            const statuses = [elements.level1Status, elements.level2Status, elements.level3Status];
            
            for (let i = 0; i < gameState.totalLevels; i++) {
                if (i < gameState.currentLevel - 1) {
                    statuses[i].textContent = 'å·²å®Œæˆ';
                    statuses[i].style.color = '#008000';
                } else if (i === gameState.currentLevel - 1) {
                    statuses[i].textContent = 'è¿›è¡Œä¸­';
                    statuses[i].style.color = '#FFA500';
                } else {
                    statuses[i].textContent = 'æœªå¼€å§‹';
                    statuses[i].style.color = '#808080';
                }
            }
        }

        // ç”Ÿæˆæ•°å­—æŒ‰é’®ç½‘æ ¼
        function generateNumberButtons() {
            elements.numberGrid.innerHTML = '';
            
            for (let i = 1; i <= 100; i++) {
                const button = document.createElement('button');
                button.className = 'number-btn';
                button.textContent = i;
                button.addEventListener('click', () => handleGuess(i));
                elements.numberGrid.appendChild(button);
            }
        }

        // å¤„ç†ç”¨æˆ·çŒœæµ‹
        function handleGuess(guessedNumber) {
            if (!gameState.isPlaying) return;
            
            // å¢åŠ çŒœæµ‹æ¬¡æ•°
            gameState.guessCount++;
            
            // è·å–ç‚¹å‡»çš„æŒ‰é’®
            const button = elements.numberGrid.children[guessedNumber - 1];
            
            if (guessedNumber === gameState.correctNumber) {
                // çŒœå¯¹äº†
                handleCorrectGuess(button);
            } else {
                // çŒœé”™äº†
                handleWrongGuess(button, guessedNumber);
            }
            
            // æ›´æ–°UI
            elements.guessCount.textContent = gameState.guessCount;
        }

        // å¤„ç†çŒœå¯¹çš„æƒ…å†µ
        function handleCorrectGuess(button) {
            // æ›´æ–°æŒ‰é’®æ ·å¼
            button.classList.add('correct');
            button.disabled = true;
            
            // æ˜¾ç¤ºæç¤ºä¿¡æ¯
            elements.hintText.textContent = 'æ­å–œä½ çŒœå¯¹å•¦ï¼';
            elements.hintText.style.color = '#008000';
            
            // è§¦å‘çƒŸèŠ±ç‰¹æ•ˆ
            createFireworks();
            
            // è®¡ç®—å¹¶æ·»åŠ ç§¯åˆ†
            calculateScore();
            
            // è®°å½•å…³å¡å†å²
            recordLevelHistory();
            
            // æ¸¸æˆæš‚åœ
            gameState.isPlaying = false;
            
            // æ˜¾ç¤ºä¸‹ä¸€å…³æŒ‰é’®æˆ–ç»“æŸæ¸¸æˆ
            if (gameState.currentLevel < gameState.totalLevels) {
                elements.nextLevel.style.display = 'block';
            } else {
                // æ‰€æœ‰å…³å¡å®Œæˆï¼Œæ˜¾ç¤ºç»“ç®—é¡µé¢
                setTimeout(showResult, 2000);
            }
        }

        // å¤„ç†çŒœé”™çš„æƒ…å†µ
        function handleWrongGuess(button, guessedNumber) {
            // æ›´æ–°æŒ‰é’®æ ·å¼
            button.classList.add('wrong');
            button.disabled = true;
            
            // æ˜¾ç¤ºæç¤ºä¿¡æ¯
            if (guessedNumber > gameState.correctNumber) {
                elements.hintText.textContent = 'çŒœå¤§äº†ï¼';
                elements.hintText.style.color = '#FF0000';
                
                // ç¦ç”¨æ‰€æœ‰å¤§äºçŒœæµ‹æ•°å­—çš„æŒ‰é’®ï¼ˆè¿™äº›éƒ½æ˜¯ä¸æ­£ç¡®çš„ï¼‰
                for (let i = guessedNumber; i <= 100; i++) {
                    const wrongButton = elements.numberGrid.children[i - 1];
                    if (wrongButton && !wrongButton.disabled) {
                        wrongButton.classList.add('wrong');
                        wrongButton.disabled = true;
                    }
                }
            } else {
                elements.hintText.textContent = 'çŒœå°äº†ï¼';
                elements.hintText.style.color = '#FFA500';
                
                // ç¦ç”¨æ‰€æœ‰å°äºçŒœæµ‹æ•°å­—çš„æŒ‰é’®ï¼ˆè¿™äº›éƒ½æ˜¯ä¸æ­£ç¡®çš„ï¼‰
                for (let i = 1; i <= guessedNumber; i++) {
                    const wrongButton = elements.numberGrid.children[i - 1];
                    if (wrongButton && !wrongButton.disabled) {
                        wrongButton.classList.add('wrong');
                        wrongButton.disabled = true;
                    }
                }
            }
        }

        // åˆ›å»ºçƒŸèŠ±ç‰¹æ•ˆ
        function createFireworks() {
            for (let i = 0; i < 100; i++) {
                setTimeout(() => {
                    const firework = document.createElement('div');
                    firework.className = 'firework';
                    
                    // éšæœºé¢œè‰²
                    const colors = ['#FFD700', '#FF6347', '#4682B4', '#98FB98', '#FFB6C1', '#9370DB'];
                    firework.style.backgroundColor = colors[Math.floor(Math.random() * colors.length)];
                    
                    // éšæœºä½ç½®
                    const x = Math.random() * window.innerWidth;
                    const y = Math.random() * window.innerHeight;
                    firework.style.left = x + 'px';
                    firework.style.top = y + 'px';
                    
                    // éšæœºåŠ¨ç”»å»¶è¿Ÿ
                    firework.style.animationDelay = Math.random() * 0.5 + 's';
                    
                    // æ·»åŠ åˆ°å®¹å™¨
                    elements.fireworksContainer.appendChild(firework);
                    
                    // 1ç§’åç§»é™¤
                    setTimeout(() => firework.remove(), 1000);
                }, i * 50);
            }
        }

        // è®¡ç®—ç§¯åˆ†
        function calculateScore() {
            let levelScore = 0;
            let bonusScore = 0;
            
            if (gameState.currentLevel === 1) {
                levelScore = 10;
                if (gameState.guessCount <= 7) bonusScore = 10;
            } else {
                levelScore = 20;
                if (gameState.guessCount <= 7) bonusScore = 20;
            }
            
            // æ€»ç§¯åˆ†
            const totalLevelScore = levelScore + bonusScore;
            gameState.totalScore += totalLevelScore;
            
            // æ›´æ–°UI
            elements.currentScore.textContent = gameState.totalScore;
        }

        // è®°å½•å…³å¡å†å²
        function recordLevelHistory() {
            gameState.levelHistory.push({
                level: gameState.currentLevel,
                correctNumber: gameState.correctNumber,
                guessCount: gameState.guessCount,
                score: gameState.totalScore - (gameState.levelHistory.reduce((sum, h) => sum + h.score, 0) || 0)
            });
        }

        // ä¸‹ä¸€å…³
        function nextLevel() {
            // å¢åŠ å…³å¡
            gameState.currentLevel++;
            
            // åˆå§‹åŒ–æ–°å…³å¡
            initGame();
        }

        // æ˜¾ç¤ºç»“ç®—é¡µé¢
        function showResult() {
            // åˆ›å»ºç»“ç®—é¡µé¢
            const resultHTML = `
                <div style="
                    position: fixed;
                    top: 0;
                    left: 0;
                    width: 100%;
                    height: 100%;
                    background: rgba(0, 0, 0, 0.8);
                    display: flex;
                    justify-content: center;
                    align-items: center;
                    z-index: 2000;
                    font-family: 'Microsoft YaHei', sans-serif;
                ">
                    <div style="
                        background: white;
                        padding: 40px;
                        border-radius: 20px;
                        max-width: 600px;
                        text-align: center;
                        box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);
                    ">
                        <h2 style="color: #FF6347; font-size: 36px; margin-bottom: 30px;">ğŸ‰ æ¸¸æˆç»“æŸï¼ğŸ‰</h2>
                        
                        <div style="margin-bottom: 30px; font-size: 18px;">
                            <p style="margin-bottom: 10px;">ğŸ† æ€»ç§¯åˆ†: <strong>${gameState.totalScore}</strong></p>
                            <p style="margin-bottom: 10px;">âœ… å®Œæˆå…³å¡: ${gameState.levelHistory.length}/${gameState.totalLevels}</p>
                        </div>
                        
                        <div style="margin-bottom: 30px; text-align: left;">
                            <h3 style="color: #4682B4; margin-bottom: 15px; font-size: 22px;">å„å…³å¡è¯¦æƒ…:</h3>
                            ${gameState.levelHistory.map(history => `
                                <p style="margin-bottom: 8px; padding: 8px; background: #f0f8ff; border-radius: 8px;">
                                    ç¬¬${history.level}å…³: æ­£ç¡®å¹´é¾„ ${history.correctNumber}, çŒœæµ‹æ¬¡æ•° ${history.guessCount}
                                </p>
                            `).join('')}
                        </div>
                        
                        <button onclick="restartGame()" style="
                            background: #4682B4;
                            color: white;
                            border: none;
                            padding: 15px 40px;
                            font-size: 20px;
                            font-weight: bold;
                            border-radius: 30px;
                            cursor: pointer;
                            transition: all 0.3s ease;
                        ">
                            ğŸ”„ é‡æ–°å¼€å§‹
                        </button>
                    </div>
                </div>
            `;
            
            // æ·»åŠ åˆ°æ–‡æ¡£
            document.body.insertAdjacentHTML('beforeend', resultHTML);
        }

        // é‡æ–°å¼€å§‹æ¸¸æˆ
        function restartGame() {
            // é‡ç½®æ¸¸æˆçŠ¶æ€
            gameState = {
                currentLevel: 1,
                totalLevels: 3,
                correctNumber: null,
                guessCount: 0,
                totalScore: 0,
                excludedNumbers: [50, 75, 25, 12, 37, 63, 87],
                levelHistory: [],
                isPlaying: true
            };
            
            // ç§»é™¤ç»“ç®—é¡µé¢
            const resultPage = document.querySelector('div[style*="position: fixed;"]');
            if (resultPage) resultPage.remove();
            
            // åˆå§‹åŒ–æ¸¸æˆ
            initGame();
        }

        // äº‹ä»¶ç›‘å¬
        elements.nextLevelBtn.addEventListener('click', nextLevel);

        // åˆå§‹åŒ–æ¸¸æˆ
        initGame();
    </script>
</body>
</html>